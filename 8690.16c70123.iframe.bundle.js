"use strict";(self.webpackChunkscript_editor=self.webpackChunkscript_editor||[]).push([[8690],{"./src/components/TextScriptEditor.tsx":function(module,__webpack_exports__,__webpack_require__){__webpack_require__.a(module,(async function(__webpack_handle_async_dependencies__,__webpack_async_result__){try{__webpack_require__.d(__webpack_exports__,{R4:function(){return triggerCharactersWithNumber},Xn:function(){return triggerCharacters}});var D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_monaco_editor_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@monaco-editor+react@4.6.0_monaco-editor@0.44.0_react-dom@18.2.0_react@18.2.0/node_modules/@monaco-editor/react/dist/index.mjs"),_constants_string__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/constants/string.ts"),_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants/monacoConfig.ts"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),script_parser__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/script-parser@0.0.46/node_modules/script-parser/dist/index.js"),_utils_actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/actions.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([_utils_actions__WEBPACK_IMPORTED_MODULE_4__]);_utils_actions__WEBPACK_IMPORTED_MODULE_4__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];var triggerCharacters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.\\@".split(""),triggerCharactersWithNumber=triggerCharacters.concat("1234567890-+*/".split("")),TextScriptEditor=function TextScriptEditor(_ref){var idx=_ref.idx,onSuccess=_ref.onSuccess,onError=_ref.onError,extraData=_ref.extraData,extraSuggestions=_ref.extraSuggestions,_ref$debug=_ref.debug,debug=void 0!==_ref$debug&&_ref$debug,_ref$defaultValue=_ref.defaultValue,defaultValue=void 0===_ref$defaultValue?"":_ref$defaultValue,_ref$defaultReturnTyp=_ref.defaultReturnType,defaultReturnType=void 0===_ref$defaultReturnTyp?"":_ref$defaultReturnTyp,_useState=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(""),_useState2=(0,D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState,2),parseStr=_useState2[0],setParseStr=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(""),_useState4=(0,D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState3,2),convertedStr=_useState4[0],setConvertedStr=_useState4[1],editorRef=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(void 0),monacoRef=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(void 0),disposableRef=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)([]),stringToAction=function stringToAction(v){if(""===v)null==onSuccess||onSuccess(void 0),setParseStr(""),setConvertedStr(""),monacoRef.current.editor.setModelMarkers(editorRef.current.getModel(),"owner",[]);else try{var _extraSuggestions,value=v;null==extraSuggestions||null===(_extraSuggestions=extraSuggestions[defaultReturnType||"_"])||void 0===_extraSuggestions||_extraSuggestions.forEach((function(suggest){if(value)switch(defaultReturnType){case"unitType":case"script":value=value.replaceAll(new RegExp("\\b".concat(suggest.insertText,'\\b(?![^"]*")'),"g"),'"'.concat(suggest.detail,'"'))}}));var output=script_parser__WEBPACK_IMPORTED_MODULE_3__.parser.parse(value||""),processedOutput="object"==typeof output?(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.bW)(output,extraData):output;if(setParseStr(processedOutput),setConvertedStr((0,script_parser__WEBPACK_IMPORTED_MODULE_3__.actionToString)({o:processedOutput,parentKey:"",defaultReturnType:defaultReturnType||"",gameData:{unitTypes:{}}})),monacoRef.current.editor.setModelMarkers(editorRef.current.getModel(),"owner",[]),"object"==typeof output){var errors=(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.zB)(value||"",output,defaultReturnType);0===errors.length?null==onSuccess||onSuccess(processedOutput):(null==onError||onError({e:errors.map((function(error){return error.message})),output:processedOutput}),monacoRef.current.editor.setModelMarkers(editorRef.current.getModel(),"owner",errors))}else if(void 0===defaultReturnType||""===defaultReturnType||typeof output===defaultReturnType||"string"==typeof output&&null!=defaultReturnType&&defaultReturnType.includes("Type")||"string"==typeof output&&"script"===defaultReturnType)null==onSuccess||onSuccess(processedOutput),monacoRef.current.editor.setModelMarkers(editorRef.current.getModel(),"owner",[]);else{var _value,message="expect ".concat(defaultReturnType," here, but got ").concat(typeof output);null==onError||onError({e:[message],output:void 0}),monacoRef.current.editor.setModelMarkers(editorRef.current.getModel(),"owner",[{message:message,severity:8,startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:(null===(_value=value)||void 0===_value?void 0:_value.length)||0}])}}catch(e){var error=e;if(setParseStr(e),editorRef.current&&monacoRef.current){var monaco=monacoRef.current,model=editorRef.current.getModel();if(model){var markers=[],errorHash=error.hash;if(errorHash){if(errorHash.expected){var _errorHash$expected,_message="expect ".concat(null===(_errorHash$expected=errorHash.expected)||void 0===_errorHash$expected?void 0:_errorHash$expected.join(", ")," here, but got ").concat(errorHash.token);null==onError||onError({e:[_message],output:void 0}),markers.push({message:_message,severity:monaco.MarkerSeverity.Error,startLineNumber:errorHash.loc.first_line,startColumn:errorHash.loc.first_column,endLineNumber:errorHash.loc.last_line,endColumn:errorHash.loc.last_column})}}else{var code=model.getValue(),undefinedName=code.replace(" is undefined",""),_findFunctionPos=(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.Yz)(code,undefinedName),startColumn=_findFunctionPos.startColumn,endColumn=_findFunctionPos.endColumn;null==onError||onError({e:[e.message],output:void 0}),markers.push({message:e.message,severity:monaco.MarkerSeverity.Error,startLineNumber:0,startColumn:startColumn,endLineNumber:0,endColumn:endColumn})}monaco.editor.setModelMarkers(model,"owner",markers)}}}},init=function init(monaco){var _provideSignatureHelp;disposableRef.current.push(monaco.languages.setMonarchTokensProvider(_constants_string__WEBPACK_IMPORTED_MODULE_7__.I+idx,_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__.DJ)),disposableRef.current.push(monaco.languages.setLanguageConfiguration(_constants_string__WEBPACK_IMPORTED_MODULE_7__.I+idx,_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__.DN)),disposableRef.current.push(monaco.languages.registerCompletionItemProvider(_constants_string__WEBPACK_IMPORTED_MODULE_7__.I+idx,{triggerCharacters:triggerCharacters,provideCompletionItems:function provideCompletionItems(model,position,context,token){var _Object$keys,word=model.getWordUntilPosition(position),range={startLineNumber:position.lineNumber,endLineNumber:position.lineNumber,startColumn:word.startColumn,endColumn:word.endColumn},cursorPos=model.getOffsetAt(position),code=model.getValue(),suggestionType=(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.EP)(code,Math.max(0,cursorPos-1)),needBrackets=function needBrackets(obj){return suggestionType===_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__.O6&&!script_parser__WEBPACK_IMPORTED_MODULE_3__.noBracketsFuncs.includes(obj.key)},inputProps=(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.TC)((0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.qn)(code,Math.max(0,cursorPos-1))),suggestions=(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.k6)(code,Math.max(0,cursorPos-1))?[]:(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.Sv)().map((function(obj,orderIdx){var _aliasTable$obj$key,_aliasTable$obj$key2,_data$fragments$filte;return{label:"".concat(null!==(_aliasTable$obj$key=script_parser__WEBPACK_IMPORTED_MODULE_3__.aliasTable[obj.key])&&void 0!==_aliasTable$obj$key?_aliasTable$obj$key:obj.key).concat(needBrackets(obj)?"(":"").concat(suggestionType===_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__.O6?obj.data.fragments.filter((function(v){return"variable"===v.type})).map((function(v,idx){return"".concat(v.field,":").concat(v.dataType)})).join(", "):"").concat(needBrackets(obj)?")":"",": ").concat(obj.data.category),kind:suggestionType===_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__.O6?monaco.languages.CompletionItemKind.Function:monaco.languages.CompletionItemKind.Property,insertText:"".concat(null!==(_aliasTable$obj$key2=script_parser__WEBPACK_IMPORTED_MODULE_3__.aliasTable[obj.key])&&void 0!==_aliasTable$obj$key2?_aliasTable$obj$key2:obj.key).concat(needBrackets(obj)?"(":"").concat(suggestionType===_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__.O6?obj.data.fragments.filter((function(v){return"variable"===v.type})).map((function(v,idx){return"${".concat(idx+1,":").concat(v.field,"}")})).join(", "):"").concat(needBrackets(obj)?")":""),sortText:(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__._t)(obj,inputProps,defaultReturnType),documentation:null===(_data$fragments$filte=obj.data.fragments.filter((function(v){return"constant"===v.type}))[0])||void 0===_data$fragments$filte?void 0:_data$fragments$filte.text,insertTextRules:4,detail:obj.title,range:range}})),extra=[];extraSuggestions&&(null===(_Object$keys=Object.keys(extraSuggestions))||void 0===_Object$keys||_Object$keys.forEach((function(key){(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.qn)(code,Math.max(0,cursorPos-1)).functionName!==key&&key!==defaultReturnType||extraSuggestions[key].forEach((function(suggestion){suggestion.range=range,extra.push(suggestion)}))})));return{incomplete:!0,suggestions:extraSuggestions?extra.concat(suggestions):suggestions}}})),disposableRef.current.push(monaco.languages.registerSignatureHelpProvider(_constants_string__WEBPACK_IMPORTED_MODULE_7__.I+idx,{signatureHelpTriggerCharacters:triggerCharactersWithNumber,provideSignatureHelp:(_provideSignatureHelp=(0,D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)((0,D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_9__.Z)().mark((function _callee(model,position,token,context){var code,cursorPos,functionProps,targetAction,targetFrag,signatures;return(0,D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_9__.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return code=model.getValue(),cursorPos=model.getOffsetAt(position),functionProps=(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.qn)(code,Math.max(0,cursorPos-1)),targetAction=(0,_utils_actions__WEBPACK_IMPORTED_MODULE_4__.Sv)().find((function(obj){var _aliasTable$obj$key3;return(null!==(_aliasTable$obj$key3=script_parser__WEBPACK_IMPORTED_MODULE_3__.aliasTable[obj.key])&&void 0!==_aliasTable$obj$key3?_aliasTable$obj$key3:obj.key)===functionProps.functionName})),targetFrag=null==targetAction?void 0:targetAction.data.fragments.filter((function(frag){return"variable"===frag.type})),signatures=targetAction&&"undefined"!==functionProps.functionName?[{label:"",documentation:{value:"".concat(functionProps.functionName,"(").concat(null==targetFrag?void 0:targetFrag.map((function(frag,idx){var _frag$extraData;return"".concat(idx===functionProps.functionParametersOffset?"**":"").concat(frag.field,": ").concat((null===(_frag$extraData=frag.extraData)||void 0===_frag$extraData?void 0:_frag$extraData.dataType)||frag.dataType).concat(idx===functionProps.functionParametersOffset?"**":"")})),")")},parameters:targetFrag.map((function(frag){return{label:"",documentation:frag.filed}}))}]:[],_context.abrupt("return",{dispose:function dispose(){},value:{activeParameter:functionProps.functionParametersOffset,activeSignature:0,signatures:signatures}});case 7:case"end":return _context.stop()}}),_callee)}))),function provideSignatureHelp(_x,_x2,_x3,_x4){return _provideSignatureHelp.apply(this,arguments)})}))};return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){monacoRef.current&&(disposableRef.current.forEach((function(ref){ref.dispose()})),init(monacoRef.current))}),[defaultReturnType,extraSuggestions]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){return function(){disposableRef.current.forEach((function(ref){ref.dispose()}))}}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_monaco_editor_react__WEBPACK_IMPORTED_MODULE_0__.ML,{language:_constants_string__WEBPACK_IMPORTED_MODULE_7__.I+idx,height:"1.5rem",theme:"vs-dark",options:_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__.JY,beforeMount:function beforeMount(monaco){monacoRef.current=monaco,monaco.languages.register({id:_constants_string__WEBPACK_IMPORTED_MODULE_7__.I+idx}),init(monaco)},onMount:function onMount(editor){editorRef.current=editor,editor.onKeyDown((function(e){2===e.keyCode&&e.stopPropagation()})),editor.setValue(defaultValue),stringToAction(defaultValue),editor.onDidType((function(v){editor.trigger("anything","editor.action.triggerParameterHints",(function(){}))})),editor.onKeyDown((function(e){"Enter"===e.code&&editor.trigger("anything","acceptSelectedSuggestion",(function(){}))})),editor.addCommand(monacoRef.current.KeyMod.CtrlCmd|monacoRef.current.KeyCode.KeyF,(function(){})),editor.addCommand(monacoRef.current.KeyMod.CtrlCmd|monacoRef.current.KeyCode.KeyH,(function(){})),editor.addCommand(monacoRef.current.KeyCode.Enter,(function(){editor.trigger("anything","acceptSelectedSuggestion",(function(){}))})),editor.onDidPaste((function(e){if(!(e.range.endLineNumber<=1)){for(var newContent="",textModel=editor.getModel(),lineCount=textModel.getLineCount(),i=0;i<lineCount;i+=1)newContent+="".concat(textModel.getLineContent(i+1)).concat(i!==lineCount-1?" ":"");textModel.setValue(newContent),editor.setPosition({column:newContent.length+2,lineNumber:1})}})),editor.addCommand(monacoRef.current.KeyCode.F1,(function(){})),editor.onDidFocusEditorText((function(){editor.trigger("anything","editor.action.triggerSuggest",(function(){})),editor.trigger("anything","editor.action.triggerParameterHints",(function(){}))}))},onChange:function onChange(v){stringToAction(v)}}),debug&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{style:{backgroundColor:"orange"},children:"output(raw json):"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("pre",{children:JSON.stringify(parseStr,null,2)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{style:{backgroundColor:"orange"},children:"converted from raw json:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("pre",{children:convertedStr})]})]})};__webpack_exports__.ZP=TextScriptEditor;try{TextScriptEditor.displayName="TextScriptEditor",TextScriptEditor.__docgenInfo={description:"",displayName:"TextScriptEditor",props:{debug:{defaultValue:{value:"false"},description:"",name:"debug",required:!1,type:{name:"boolean"}},idx:{defaultValue:null,description:"",name:"idx",required:!0,type:{name:"number"}},defaultValue:{defaultValue:{value:""},description:"",name:"defaultValue",required:!1,type:{name:"string"}},defaultReturnType:{defaultValue:{value:""},description:"",name:"defaultReturnType",required:!1,type:{name:"string"}},extraSuggestions:{defaultValue:null,description:"",name:"extraSuggestions",required:!1,type:{name:"Record<string, CompletionItem[]>"}},extraData:{defaultValue:null,description:"",name:"extraData",required:!1,type:{name:"ExtraDataProps"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(({ e, output }: { e: string[]; output: string; }) => void)"}},onSuccess:{defaultValue:null,description:"",name:"onSuccess",required:!1,type:{name:"((parserOutput: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/TextScriptEditor.tsx#TextScriptEditor"]={docgenInfo:TextScriptEditor.__docgenInfo,name:"TextScriptEditor",path:"src/components/TextScriptEditor.tsx#TextScriptEditor"})}catch(__react_docgen_typescript_loader_error){}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},"./src/constants/monacoConfig.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{DJ:function(){return languageDef},DN:function(){return configuration},JY:function(){return OPTIONS},O6:function(){return FUNC},Pb:function(){return KEYWORDS}});var monaco_editor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/monaco-editor@0.44.0/node_modules/monaco-editor/esm/vs/editor/editor.main.js"),KEYWORDS=(monaco_editor__WEBPACK_IMPORTED_MODULE_0__.Mj.IMonarchLanguage,monaco_editor__WEBPACK_IMPORTED_MODULE_0__.Mj.LanguageConfiguration,["getItemInFrontOfUnit","selectedProjectile","getAttributeTypeOfAttribute","playAdForPlayer","randNumber","setTimeOut","facingAngle","getMapHeight","getEntityType","getSelectedEntity","rotateEntityToFacePosition","destroyEntity","setEntityDepth","getItemAtSlot","hideUnitFromPlayer","showUnitToPlayer","entitiesCollidingWithLastRaycast","lastPurchasedUnit","sendChatMessage","playSoundAtPosition","pos","toFixed","getEntityState","dropItemAtPosition","applyForceOnEntityAngle","showInputModalToPlayer","getItemQuantity","isPlayerLoggedIn","openDialogueForPlayer","continue","openWebsiteForPlayer","setEntityLifeSpan","selectedItem","hideUnitNameLabel","setTriggeringUnit","createUnitAtPosition","hideUiTextForEveryone","playersAreFriendly","hideGameSuggestionsForPlayer","cos","transformRegionDimensions","makeUnitInvisibleToFriendlyPlayers","setEntityAttributeMin","entityHeight","allUnitsOwnedByPlayer","showInviteFriendsModal","showCustomModalToPlayer","lastSelectingDialogueOption","playerAttributeMax","triggeringItem","getItemParticle","allProjectilesAttachedToUnit","showUiTextForEveryone","forAllItems","removePlayerFromPlayerGroup","getPlayerAttribute","playerIsControlledByHuman","setUnitOwner","getMapWidth","updateItemQuantity","applyForceOnEntityAngleLT","setEntityState","entityWidth","hideUnitInPlayerMinimap","selectedItemType","getPlayerCount","getItemCurrentlyHeldByUnit","allItemsDroppedOnGround","return","runScript","addUnitToUnitGroup","humanPlayers","lastUsedItem","lastPlayerInput","arctan","concat","getPlayerName","getSourceItemOfProjectile","type","type","triggeringRegion","playerCameraSetZoom","floor","setUnitNameLabel","getUnitTypeName","openShopForPlayer","y","sqrt","closeDialogueForPlayer","comment","createEntityAtPositionWithDimensions","increaseVariableByNumber","getMouseCursorPosition","lastOverlappingUnit","allItems","allItemsAttachedToUnit","getEntireMapRegion","playerCameraTrackUnit","castAbility","playersAreHostile","allItemsOwnedByUnit","computerPlayers","playEntityAnimation","while","allEntities","lastPurchasedUnitType","applyForceOnEntityXY","showUnitInPlayerMinimap","savePlayerData","hideUnitNameLabelFromPlayer","regionOverlapsWithRegion","allItemTypesInGame","triggeringPlayer","getProjectileTypeOfProjectile","allPlayers","setPlayerAttribute","updateUiTextForPlayer","showUnitNameLabel","closeShopForPlayer","repeat","stopMusic","setVelocityOfEntityXY","selectedRegion","showUnitNameLabelToPlayer","spawnItem","createItemWithMaxQuantityAtPosition","randItemType","lastOverlappedUnit","showMenu","startAcceptingPlayers","forAllEntities","makePlayerSelectUnit","setEntityAttribute","lastCreatedItem","lastCreatedProjectile","forAllItemTypes","createEntityForPlayerAtPositionWithDimensions","getUnitCount","lastTouchingUnit","lastOverlappingItem","getItemInInventorySlot","updateUiTextForEveryone","forAllProjectiles","type","angleBetweenPositions","stopMusicForPlayer","positionCamera","createProjectileAtPosition","getWidthOfRegion","showMenuAndSelectCurrentServer","getSourceUnitOfProjectile","setFadingText","changeScaleOfEntityBody","entityBounds","entityAttributeMin","forAllRegions","rotateEntityToRadiansLT","str2num","setPlayerAttributeMax","setPlayerAttributeRegenerationRate","getQuantityOfUnitTypeInUnitTypeGroup","forAllUnitTypes","centerOfRegion","lastRaycastCollisionPos","decreaseVariableByNumber","y","lastCastingUnit","lastTouchedUnit","selectedParticle","allUnitsAttachedToUnit","kickPlayer","forAllPlayers","removeUnitFromUnitGroup","playersAreNeutral","distanceBetweenPositions","flipEntitySprite","makeUnitInvisibleToNeutralPlayers","entityAttributeMax","getEntityPosition","playerHasAdblockEnabled","saveUnitData","applyTorqueOnEntity","giveNewItemToUnit","playerAttributeMin","startUsingItem","moveEntity","for","sin","x","showMenuAndSelectBestServer","getValueOfEntityVariable","entitiesInRegion","applyForceOnEntityXYRelative","applyForceOnEntityXYLT","attachEntityToEntity","entityExists","nameOfRegion","undefined","banPlayerFromChat","getEntityVelocityY","allUnitTypesInGame","x","randPos","triggeringProj","getUnitParticle","changeUnitType","addPlayerToPlayerGroup","playMusicForPlayerRepeatedly","showGameSuggestionsForPlayer","isPositionInWall","entitiesInRegionInFrontOfEntityAtDistance","setEntityAttributeRegenerationRate","lastPlayedTime","makeUnitSelectItemAtSlot","getItemTypeName","getMax","lastCreatedUnit","getRotateSpeed","owner","allUnits","stopUsingItem","makeUnitVisible","makeUnitInvisible","break","currentAmmo","getHeightOfRegion","changeScaleOfEntitySprite","slice","setPlayerName","makeUnitPickupItemAtSlot","dropItemInInventorySlot","subString","getItemMaxQuantity","unbanPlayerFromChat","abs","changeDesc","triggeringUnit","getOwner","selectedPlayer","lastTouchedItem","lastTouchedProj","allUnitsAttachedToItem","sendChatMessageToPlayer","playAdForEveryone","hideUiTextForPlayer","showUiTextForPlayer","playMusic","assignPlayerType","allProjectiles","playMusicForPlayer","if","makeUnitVisibleToNeutralPlayers","makeUnitVisibleToFriendlyPlayers","makeUnitPickupItem","region","getEntityAttribute","currentTimeStamp","giveNewItemWithQuantityToUnit","getEntityVelocityX","defaultQuantityOfItemType","getQuantityOfItemTypeInItemTypeGroup","type","selectedUnitType","getNumberOfItemsPresent","getMin","selectedUnit","lastOverlappingProj","triggeringAttr","allUnitsMountedOnUnit","allUnitsInRegion","dropAllItems","useItemOnce","stopAcceptingPlayers","setEntityVelocityAtAngle","setEntityAttributeMax","getValueOfPlayerVariable","allRegions","maxValueOfItemType","angleBetweenMouseAndWindowCenter","setPlayerAttributeMin","makePlayerTradeWithPlayer","pow","lastAttackedUnit","lastAttackingUnit","updateUiTextForTimeForPlayer","getNumberOfUnitsOfUnitType","aiMoveToPosition","aiAttackUnit","getNumberOfPlayersOfPlayerType","changeSensorRadius","ownerUnitOfSensor","sensor","getTriggeringSensor","lastChatMessageSent","loadPlayerDataAndApplyIt","createFloatingText","getLengthOfString","setLastAttackedUnit","setLastAttackingUnit","setItemFireRate","applyImpulseOnEntityXY","toLowerCase","stringStartsWith","stringEndsWith","replaceValuesInString","lastAttackingItem","playSoundForPlayer","stopSoundForPlayer","showDismissibleInputModalToPlayer","getTimeString","setItemName","changeItemInventoryImage","getItemDescription","addAttributeBuffToUnit","addPercentageAttributeBuffToUnit","stunUnit","removeStunFromUnit","setLastAttackingItem","mutePlayerMicrophone","unmutePlayerMicrophone","sendPostRequest","loadUnitDataFromString","loadPlayerDataFromString","getUnitData","getPlayerData","getUnitId","getPlayerId","getUnitFromId","getPlayerFromId","getStringArrayLength","getStringArrayElement","insertStringArrayElement","updateStringArrayElement","removeStringArrayElement","removeAllAttributeBuffs","changeInventorySlotColor","setOwnerUnitOfProjectile","thisEntity","entityName","selectedInventorySlot","log10","addBotPlayer","botPlayers","enableAI","disableAI","isAIEnabled","isBotPlayer","isComputerPlayer","entitiesBetweenTwoPositions","unitSensorRadius","aiGoIdle","targetUnit","sendCoinsToPlayer","addChatFilter","num2str","sendCoinsToPlayer2","playerIsCreator","setMaxAttackRange","setLetGoDistance","setMaxTravelDistance","getPlayerSelectedUnit","toDegrees","toRadians","polarProjection","editMapTile","loadMapFromString","getMapJson","teleportEntity","forAllDebris","roleExistsForPlayer","emitParticlesFromEntity","emitParticlesAtPosition","editMapTiles","getMapTileId","stringIsANumber","setSourceItemOfProjectile","getGlobalVariable","lastReceivedPostResponse","lastUpdatedVariableName","getVariable","str2obj","elementFromObject","obj2Str","removeElement","makePlayerSendChatMessage","emptyObject","addStringElement","elementCount","addObjectElement","requestPost","unitIsCarryingItemType","startCastingAbility","stopCastingAbility","applyTorqueOnEntityToFacePosition","changeRegionColor","startMovingUnitUp","startMovingUnitDown","startMovingUnitLeft","startMovingUnitRight","stopMovingUnitX","stopMovingUnitY","openBackpackForPlayer","closeBackpackForPlayer","setUnitNameLabelColor","getCameraPosition","getCameraWidth","getCameraHeight","allUnitsOfUnitType","forAllUnits","allItemsOfItemType","setUnitNameLabelColorForPlayer","getDefaultAttributeValueOfUnitType","playerCameraStopTracking","hideUiElementForPlayer","showUiElementForPlayer","setUIElementHtml","lastClickedUiElementId","appendRealtimeCSSForPlayer","updateRealtimeCSSForPlayer","realtimeCSSOfPlayer","mathCeiling","stopMovingUnit","toUpperCase","getHighScoreOfPlayer","isUnitMoving","forIn","addClassToUIElement","removeClassFromUIElement","isPlayerClient","setCameraDeadzone","purchaseItemFromShop","getUnitType","getItemType","getProjectileType","getSecondaryTouchPosition","allProjectilesOfProjectileType","unitTypeWidth","unitTypeHeight","notValue","isPlayerOnMobile","getPlayerUsername","repeatWithDelay","entityFacingAngle","playersOfPlayerType","sendSecurePostRequest","openSkinShop","openSkinSubmissionPage","playerCameraSetPitch","getRegionByName","changeLayerOpacity","forAllElementsInObject","selectedElement","objectContainsElement","selectedElementsKey","playMusicForPlayerAtTime","getServerAge","getServerStartTime","mathRound"]),FUNC=0,languageDef={defaultToken:"",number:/\d+(\.\d+)?/,keywords:KEYWORDS,tokenizer:{root:[[/\w+/,{cases:{"@keywords":"keyword"}}],{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation",log:"annotation token: $0"}]],whitespace:[[/\s+/,"white"]],numbers:[[/@number/,"number"]],strings:[[/"([^"]*)"/,"string.escape"],[/'([^']*)'/,"string.escape"]]}},configuration={brackets:[["{","}"],["[","]"],["(",")"],['"','"'],["'","'"]]},OPTIONS={quickSuggestions:!0,glyphMargin:!1,lineDecorationsWidth:0,folding:!1,fixedOverflowWidgets:!1,acceptSuggestionOnEnter:"on",hover:{delay:100},roundedSelection:!1,contextmenu:!1,cursorStyle:"line-thin",occurrencesHighlight:!1,links:!1,minimap:{enabled:!1},wordBasedSuggestions:!0,find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",seedSearchStringFromSelection:"never"},fontSize:16,fontWeight:"normal",wordWrap:"off",lineNumbers:"off",lineNumbersMinChars:0,overviewRulerLanes:0,overviewRulerBorder:!1,hideCursorInOverviewRuler:!0,scrollBeyondLastColumn:0,scrollbar:{horizontal:"hidden",vertical:"hidden",alwaysConsumeMouseWheel:!1}}},"./src/constants/string.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{I:function(){return MODDIOSCRIPT}});var MODDIOSCRIPT="MODDIOSCRIPT"},"./src/utils/actions.ts":function(module,__webpack_exports__,__webpack_require__){__webpack_require__.a(module,(async function(__webpack_handle_async_dependencies__,__webpack_async_result__){try{__webpack_require__.d(__webpack_exports__,{EP:function(){return getSuggestionType},Sv:function(){return getActions},TC:function(){return getInputProps},Yz:function(){return findFunctionPos},_t:function(){return checkSuggestions},bW:function(){return postProcessOutput},k6:function(){return checkIsWrappedInQuotes},qn:function(){return getFunctionProps},zB:function(){return checkTypeIsValid}});var D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/axios@1.6.0/node_modules/axios/lib/axios.js"),script_parser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/script-parser@0.0.46/node_modules/script-parser/dist/index.js"),_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants/monacoConfig.ts"),effect__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/effect@2.0.0-next.56/node_modules/effect/dist/esm/Effect.js"),_obj__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/obj.ts"),_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/string.ts"),actionsCache=(await axios__WEBPACK_IMPORTED_MODULE_3__.Z.get("https://www.modd.io/api/editor-api/?game=two-houses")).data.message,postProcessOutput=function postProcessOutput(output){var extraData=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{thisEntity:[]};return(0,_obj__WEBPACK_IMPORTED_MODULE_4__.S)(output,extraData,[setVariableDataTypeAndEntityType])},setVariableDataTypeAndEntityType=function setVariableDataTypeAndEntityType(k,v,extraData){var _v$entity;if(void 0!==v&&("getValueOfEntityVariable"===v.function&&"thisEntity"===(null===(_v$entity=v.entity)||void 0===_v$entity?void 0:_v$entity.function))){var targetData=extraData.thisEntity.find((function(data){var _v$variable,_v$variable$variable;return data.key===(null===(_v$variable=v.variable)||void 0===_v$variable||null===(_v$variable$variable=_v$variable.variable)||void 0===_v$variable$variable?void 0:_v$variable$variable.text)}));targetData&&(v.variable.variable.dataType=targetData.dataType,v.variable.variable.entity=targetData.entity)}},getActions=function getActions(){return actionsCache},getInputProps=function getInputProps(functionProps){var targetAction=getActions().find((function(obj){var _aliasTable$obj$key;return(null!==(_aliasTable$obj$key=script_parser__WEBPACK_IMPORTED_MODULE_0__.aliasTable[obj.key])&&void 0!==_aliasTable$obj$key?_aliasTable$obj$key:obj.key)===functionProps.functionName||obj.key===functionProps.functionName}));if(targetAction){var _targetFrag$extraData,_targetFrag$extraData2,_targetFrag$extraData3;if("runScript"===targetAction.key)return"string";var targetFrag=targetAction.data.fragments.filter((function(frag){return"variable"===frag.type}))[functionProps.functionParametersOffset];return(null==targetFrag||null===(_targetFrag$extraData=targetFrag.extraData)||void 0===_targetFrag$extraData?void 0:_targetFrag$extraData.type)||(null==targetFrag||null===(_targetFrag$extraData2=targetFrag.extraData)||void 0===_targetFrag$extraData2?void 0:_targetFrag$extraData2.dataType)||(null==targetFrag||null===(_targetFrag$extraData3=targetFrag.extraData)||void 0===_targetFrag$extraData3?void 0:_targetFrag$extraData3.dataTypes)||(null==targetFrag?void 0:targetFrag.dataType)}return""},findFunctionPos=function findFunctionPos(s,functionName){var startColumn=s.indexOf(functionName);return{startColumn:startColumn,endColumn:startColumn+(functionName?functionName.length:0)-1}},inValidKeys=["function","items","vars"],checkTypeIsValid=function checkTypeIsValid(s,obj,defaultReturnType){var ranges=[];if("object"!=typeof obj||void 0===obj._returnType)return[];var functionName=obj.function;if(functionName){var type=function getReturnType(functionName){var _actions$find,returnType;return returnType=null===(_actions$find=getActions().find((function(action){return action.key===functionName})))||void 0===_actions$find?void 0:_actions$find.data.category,"calculate"===functionName?"number":returnType}(functionName);if(obj._returnType===defaultReturnType||null!=defaultReturnType&&defaultReturnType.includes(obj._returnType)||"entity"===obj._returnType&&!constantTypes.includes(defaultReturnType||""));else if(!(""===defaultReturnType||void 0===defaultReturnType||type===defaultReturnType||entityEqual(type,defaultReturnType)||"string"===type&&null!=defaultReturnType&&defaultReturnType.includes("Type"))){var _findFunctionPos2=findFunctionPos(s,functionName),startColumn=_findFunctionPos2.startColumn,endColumn=_findFunctionPos2.endColumn;ranges.push({message:"output type error: expect ".concat(defaultReturnType," in ").concat(functionName," here, but got ").concat(type),severity:8,startLineNumber:0,startColumn:startColumn,endLineNumber:0,endColumn:endColumn})}}return Object.keys(obj).filter((function(key){return!inValidKeys.includes(key)&&!key.startsWith("_")})).forEach((function(key,idx){var nestedObj=obj[key],inputType=getInputProps({functionName:functionName,functionParametersOffset:idx});if("object"==typeof nestedObj)ranges.push.apply(ranges,(0,D_repo_script_editor_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(checkTypeIsValid(s,nestedObj,inputType)));else if(typeof nestedObj!==inputType||entityEqual(typeof nestedObj,inputType))if(Array.isArray(inputType)&&inputType.includes(typeof nestedObj));else{var _findParametersPos=function findParametersPos(s,functionName,offset){var endColumn=findFunctionPos(s,functionName).endColumn,startColumn=endColumn+=2;return effect__WEBPACK_IMPORTED_MODULE_5__.Wno((0,_string__WEBPACK_IMPORTED_MODULE_2__.G)({s:s,idx:endColumn,step:1,break:!1,searchChar:[{from:["("],to:")"}],funcToEachChar:function funcToEachChar(iter){return","===iter.s[iter.idx]&&(0===offset?(endColumn=iter.idx+1,iter.break=!0):startColumn=iter.idx+3),iter}})),{startColumn:startColumn,endColumn:endColumn}}(s,functionName,idx),_startColumn=_findParametersPos.startColumn,_endColumn=_findParametersPos.endColumn;ranges.push({message:"input type error: expect ".concat(inputType," in ").concat(functionName,", but got ").concat(typeof nestedObj),severity:8,startLineNumber:0,startColumn:_startColumn,endLineNumber:0,endColumn:_endColumn})}})),ranges},constantTypes=["string","number","boolean"],multiTypes=["entity","Multiple"],entityEqual=function entityEqual(a,b){return!constantTypes.includes(a)&&multiTypes.includes(b)||!constantTypes.includes(b)&&multiTypes.includes(a)},checkSuggestions=function checkSuggestions(obj,inputProps,defaultReturnType){var value="";if(""===inputProps){if(!defaultReturnType)return"c";value=defaultReturnType}else value=null!=inputProps?inputProps:defaultReturnType;return obj.data.category===value?"b":"c"},getFunctionProps=function getFunctionProps(s,cursorPos){var output={functionName:"",functionParametersOffset:0},offset=0;return effect__WEBPACK_IMPORTED_MODULE_5__.Wno((0,_string__WEBPACK_IMPORTED_MODULE_2__.G)({searchChar:[{from:['"']},{from:["'"]},{from:[")"],to:"("}],s:s,idx:cursorPos,step:-1,break:!1,funcToJumpedChar:function funcToJumpedChar(iter){return"("===iter.s[iter.idx]&&(offset+=1),iter},funcToEachChar:function funcToEachChar(iter){if(_constants_monacoConfig__WEBPACK_IMPORTED_MODULE_1__.Pb.includes(output.functionName)){if(0===offset&&(void 0===iter.s[iter.idx+iter.step]||!1===/^[a-zA-Z0-9_]+$/.test(iter.s[iter.idx+iter.step])))return iter.break=!0,iter;offset-=1}return/^[a-zA-Z0-9_]+$/.test(iter.s[iter.idx])?output.functionName=iter.s[iter.idx]+output.functionName:","===iter.s[iter.idx]?output.functionParametersOffset+=1:output.functionName="",iter}})),output},checkIsWrappedInQuotes=function checkIsWrappedInQuotes(s,pos){var wrappedInQuotes=""!==s;return effect__WEBPACK_IMPORTED_MODULE_5__.Wno((0,_string__WEBPACK_IMPORTED_MODULE_2__.G)({searchChar:[{from:['"']},{from:["'"]}],s:s,idx:0,step:1,break:!1,funcToEachChar:function funcToEachChar(iter){return iter.idx===pos&&(wrappedInQuotes=!1,iter.break=!0),iter}})),wrappedInQuotes},getSuggestionType=function getSuggestionType(s,pos){var blacklistChars=["(",'"',"'",")"],type=0;return effect__WEBPACK_IMPORTED_MODULE_5__.Wno((0,_string__WEBPACK_IMPORTED_MODULE_2__.G)({searchChar:[{from:['"']},{from:['"']}],s:s,idx:pos,step:-1,break:!1,funcToEachChar:function funcToEachChar(iter){return iter.break=blacklistChars.includes(iter.s[iter.idx]),"."===iter.s[iter.idx]&&(type="$"===iter.s[iter.idx+1]?2:1,iter.break=!0),iter}})),type};__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}),1)},"./src/utils/obj.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{S:function(){return removeUnusedProperties}});var removeUnusedProperties=function removeUnusedProperties(obj,extraData,effects){if(Array.isArray(obj))return obj;null==effects||effects.forEach((function(effect){effect("",obj,extraData)}));var newObj={};return Object.keys(obj).forEach((function(key){key.startsWith("_")||(null==effects||effects.forEach((function(effect){effect(key,obj[key],extraData)})),newObj[key]="object"!=typeof obj[key]||Array.isArray(obj[key])?obj[key]:removeUnusedProperties(obj[key],extraData,effects))})),newObj}},"./src/utils/string.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{G:function(){return SmartIterationString}});var effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/effect@2.0.0-next.56/node_modules/effect/dist/esm/Match.js"),effect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/effect@2.0.0-next.56/node_modules/effect/dist/esm/Effect.js"),effect__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/effect@2.0.0-next.56/node_modules/effect/dist/esm/Function.js"),effect_Predicate__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/effect@2.0.0-next.56/node_modules/effect/dist/esm/Predicate.js"),noZeroStep=effect__WEBPACK_IMPORTED_MODULE_0__.dt().pipe(effect__WEBPACK_IMPORTED_MODULE_0__.ff({step:0},(function(_){return effect__WEBPACK_IMPORTED_MODULE_1__.ng0(_)})),effect__WEBPACK_IMPORTED_MODULE_0__.vx((function(){return effect__WEBPACK_IMPORTED_MODULE_1__.bGj(new Error("the step should not be 0"))}))),canMove=function canMove(iter){return(iter.step>0?iter.idx+iter.step<iter.s.length+1:iter.idx+iter.step>-2)&&!iter.break&&(void 0===iter.iterationCount||iter.iterationCount<100)},inRange=function inRange(iter){return effect__WEBPACK_IMPORTED_MODULE_1__.lle(iter.idx>-1&&iter.idx<Math.max(1,iter.s.length)?effect__WEBPACK_IMPORTED_MODULE_1__.ng0(iter):effect__WEBPACK_IMPORTED_MODULE_1__.bGj(new Error("idx should in 0~".concat(iter.s.length-1))))},isInt=function isInt(iter){return effect__WEBPACK_IMPORTED_MODULE_1__.lle(Number.isInteger(iter.step)?effect__WEBPACK_IMPORTED_MODULE_1__.ng0(iter):effect__WEBPACK_IMPORTED_MODULE_1__.bGj(new Error("step should be integer")))},moveIdx=function moveIdx(iter,to){return iter.idx=void 0!==to?-1!==to?to:iter.idx:iter.idx+iter.step,void 0===iter.iterationCount?iter.iterationCount=0:iter.iterationCount+=1,iter},jumpToNextChar=function jumpToNextChar(iter){var _param$to,_param$to2,param=function canJump(iter){return iter.searchChar.find((function(params){return params.from.includes(iter.s[iter.idx])}))}(iter),targetPos=void 0!==param?iter.step>0?iter.s.indexOf(null!==(_param$to=param.to)&&void 0!==_param$to?_param$to:iter.s[iter.idx],iter.idx+1)+1:iter.s.lastIndexOf(null!==(_param$to2=param.to)&&void 0!==_param$to2?_param$to2:iter.s[iter.idx],iter.idx-1)+-1:void 0;return(0,effect_Predicate__WEBPACK_IMPORTED_MODULE_2__.o8)(param)||!canMove(iter)||(0,effect_Predicate__WEBPACK_IMPORTED_MODULE_2__.o8)(targetPos)||-1===targetPos?iter:jumpToNextChar(moveIdx(iter.funcToJumpedChar?iter.funcToJumpedChar(iter):iter,targetPos))},SmartIterationString=function SmartIterationString(iter){var preTestFuncs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[noZeroStep,inRange,isInt];return(0,effect__WEBPACK_IMPORTED_MODULE_3__.zG)(effect__WEBPACK_IMPORTED_MODULE_1__.$6P(preTestFuncs.map((function(func){return func(iter)}))),effect__WEBPACK_IMPORTED_MODULE_1__.PwY({onFailure:function onFailure(error){return effect__WEBPACK_IMPORTED_MODULE_1__.bGj(error)},onSuccess:function onSuccess(iters){return effect__WEBPACK_IMPORTED_MODULE_1__.UPJ(iters[0],{while:canMove,body:function body(iter){return effect__WEBPACK_IMPORTED_MODULE_1__.ng0((0,effect__WEBPACK_IMPORTED_MODULE_3__.zG)(jumpToNextChar(iter),(function(iter){return iter.funcToEachChar&&canMove(iter)?iter.funcToEachChar(iter):iter}),moveIdx))}})}}))}}}]);